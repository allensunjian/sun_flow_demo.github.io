{"version":3,"file":"js/app.2abb6c23.js","mappings":"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","sources":["webpack://sun-flow/./src/App.vue","webpack://sun-flow/./src/components/subs/base-flow.vue","webpack://sun-flow/./src/components/subs/base-flow.vue?6caf","webpack://sun-flow/./src/components/subs/edit-flow.vue","webpack://sun-flow/./src/components/subs/edit-flow.vue?613e","webpack://sun-flow/./src/components/subs/handle-render-flow.vue","webpack://sun-flow/./src/components/subs/handle-render-flow.vue?0dac","webpack://sun-flow/./src/components/subs/mid-flow.vue","webpack://sun-flow/./src/components/subs/mid-flow.vue?7196","webpack://sun-flow/./src/components/subs/full-flow.vue","webpack://sun-flow/./src/components/subs/full-flow.vue?b7a1","webpack://sun-flow/./src/components/indexPage.vue","webpack://sun-flow/./src/components/indexPage.vue?ff0e","webpack://sun-flow/./src/App.vue?7ccd","webpack://sun-flow/./src/main.js","webpack://sun-flow/./workflow_lib/workflow/config/config.js","webpack://sun-flow/./workflow_lib/workflow/abstract/baseClass.js","webpack://sun-flow/./workflow_lib/workflow/workflow.js","webpack://sun-flow/webpack/bootstrap","webpack://sun-flow/webpack/runtime/chunk loaded","webpack://sun-flow/webpack/runtime/compat get default export","webpack://sun-flow/webpack/runtime/define property getters","webpack://sun-flow/webpack/runtime/global","webpack://sun-flow/webpack/runtime/hasOwnProperty shorthand","webpack://sun-flow/webpack/runtime/node module decorator","webpack://sun-flow/webpack/runtime/jsonp chunk loading","webpack://sun-flow/webpack/startup"],"sourcesContent":["<!--\n * @Author: allensunjian Allen_sun_js@hotmail.com\n * @Date: 2023-04-22 09:41:53\n * @LastEditors: allensunjian Allen_sun_js@hotmail.com\n * @LastEditTime: 2023-04-25 15:04:30\n * @FilePath: \\workflow_demo\\workflow-demo\\src\\App.vue\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n-->\n<template>\n  <index-page></index-page>\n</template>\n\n<script>\nimport indexPage from \"./components/indexPage.vue\";\n\nexport default {\n  name: \"App\",\n  components: {\n    indexPage,\n  },\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\nbody {\n  margin: 0;\n}\n</style>\n","<!--\r\n * @Author: allensunjian Allen_sun_js@hotmail.com\r\n * @Date: 2023-04-22 09:41:53\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2023-04-27 16:48:32\r\n * @FilePath: \\workflow_demo\\workflow-demo\\src\\components\\indexPage.vue\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n-->\r\n<template>\r\n  <div style=\"height: 100%; width: 100%\">\r\n    <workflow :flow-data=\"State.flowData\" :scale=\"true\"></workflow>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport workflow from \"../../../workflow_lib/workflow/workflow.js\";\r\nimport { reactive, h } from \"vue\";\r\n\r\nconst State = reactive({\r\n  flowData: [\r\n    {\r\n      bodyContent: \"发起人\",\r\n      nodeType: 1,\r\n    },\r\n    {\r\n      bodyContent: \"审核人\",\r\n      nodeType: 2,\r\n    },\r\n    {\r\n      bodyContent: \"抄送人\",\r\n      nodeType: 3,\r\n    },\r\n    {\r\n      bodyContent: \"办理人\",\r\n      nodeType: 4,\r\n    },\r\n    {\r\n      nodeType: \"-2\",\r\n      children: [\r\n        [\r\n          {\r\n            nodeType: 5,\r\n            headerContent: \"条件01\",\r\n            bodyContent: \"这是01条件内容\",\r\n          },\r\n        ],\r\n        [\r\n          {\r\n            nodeType: 5,\r\n            headerContent: h(\"div\", { style: \"color:rgb(45, 112, 248)\" }, [\r\n              \"这是自定义标题\",\r\n            ]),\r\n            bodyContent: h(\"div\", { style: \"color:red\" }, [\"这是自定义内容\"]),\r\n          },\r\n        ],\r\n      ],\r\n    },\r\n  ],\r\n});\r\n</script>\r\n<style>\r\n.active {\r\n  background: rgb(45, 112, 248);\r\n  color: #fff;\r\n}\r\n</style>\r\n","import script from \"./base-flow.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./base-flow.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./base-flow.vue?vue&type=style&index=0&id=c7e8e93a&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<!--\r\n * @Author: allensunjian Allen_sun_js@hotmail.com\r\n * @Date: 2023-04-22 09:41:53\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2023-04-27 16:48:36\r\n * @FilePath: \\workflow_demo\\workflow-demo\\src\\components\\indexPage.vue\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n-->\r\n<template>\r\n  <div style=\"height: 100%; width: 100%\">\r\n    <workflow\r\n      @error=\"getError\"\r\n      :flow-data=\"State.flowData\"\r\n      :edit=\"true\"\r\n    ></workflow>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport workflow from \"sun-flow\";\r\nimport { reactive, h } from \"vue\";\r\nconst getError = (err) => {\r\n  alert(JSON.stringify(err));\r\n};\r\nconst State = reactive({\r\n  flowData: [\r\n    {\r\n      bodyContent: \"发起人1\",\r\n      nodeType: 1,\r\n    },\r\n    {\r\n      bodyContent: \"审核人1\",\r\n      nodeType: 2,\r\n    },\r\n    {\r\n      bodyContent: \"抄送人1\",\r\n      nodeType: 3,\r\n    },\r\n    {\r\n      bodyContent: \"办理人1\",\r\n      nodeType: 4,\r\n    },\r\n    {\r\n      nodeType: \"-2\",\r\n      children: [\r\n        [\r\n          {\r\n            nodeType: 5,\r\n            headerContent: \"条件01\",\r\n            bodyContent: \"这是01条件内容\",\r\n          },\r\n        ],\r\n        [\r\n          {\r\n            nodeType: 5,\r\n            headerContent: h(\"div\", { style: \"color:rgb(45, 112, 248)\" }, [\r\n              \"这是自定义标题\",\r\n            ]),\r\n            bodyContent: h(\"div\", { style: \"color:red\" }, [\"这是自定义内容\"]),\r\n          },\r\n        ],\r\n      ],\r\n    },\r\n  ],\r\n});\r\n</script>\r\n<style>\r\n.active {\r\n  background: rgb(45, 112, 248);\r\n  color: #fff;\r\n}\r\n</style>\r\n","import script from \"./edit-flow.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./edit-flow.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./edit-flow.vue?vue&type=style&index=0&id=7e8aece4&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<!--\r\n * @Author: allensunjian Allen_sun_js@hotmail.com\r\n * @Date: 2023-04-22 09:41:53\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2023-04-27 16:48:41\r\n * @FilePath: \\workflow_demo\\workflow-demo\\src\\components\\indexPage.vue\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n-->\r\n<template>\r\n  <div style=\"height: 100%; width: 100%\">\r\n    <workflow\r\n      :flow-data=\"State.flowData\"\r\n      :midRender=\"true\"\r\n      :node-renderer=\"nodeRednder\"\r\n    ></workflow>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport workflow from \"sun-flow\";\r\nimport { reactive, h } from \"vue\";\r\n\r\nconst State = reactive({\r\n  flowData: [\r\n    {\r\n      bodyContent: \"发起人1\",\r\n      nodeType: 1,\r\n    },\r\n    {\r\n      bodyContent: \"审核人1\",\r\n      nodeType: 2,\r\n    },\r\n    {\r\n      bodyContent: \"抄送人1\",\r\n      nodeType: 3,\r\n    },\r\n    {\r\n      bodyContent: \"办理人1\",\r\n      nodeType: 4,\r\n    },\r\n    {\r\n      nodeType: \"-2\",\r\n      children: [\r\n        [\r\n          {\r\n            nodeType: 5,\r\n            headerContent: \"条件01\",\r\n            bodyContent: \"这是01条件内容\",\r\n          },\r\n        ],\r\n        [\r\n          {\r\n            nodeType: 5,\r\n            headerContent: h(\"div\", { style: \"color:rgb(45, 112, 248)\" }, [\r\n              \"这是自定义标题\",\r\n            ]),\r\n            bodyContent: h(\"div\", { style: \"color:red\" }, [\"这是自定义内容\"]),\r\n          },\r\n        ],\r\n      ],\r\n    },\r\n  ],\r\n});\r\nlet counter = 0;\r\nconst nodeRednder = (node) => {\r\n  counter++;\r\n  let bodyContent = null;\r\n  let headerContent = null;\r\n  headerContent = \"自定义标题\" + counter;\r\n  bodyContent = \"自定义内容\" + counter;\r\n  return { nodeType: node.nodeType, bodyContent, headerContent };\r\n};\r\n</script>\r\n<style>\r\n.active {\r\n  background: rgb(45, 112, 248);\r\n  color: #fff;\r\n}\r\n</style>\r\n","import script from \"./handle-render-flow.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./handle-render-flow.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./handle-render-flow.vue?vue&type=style&index=0&id=2764e102&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<!--\r\n * @Author: allensunjian Allen_sun_js@hotmail.com\r\n * @Date: 2023-04-22 09:41:53\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2023-04-27 16:48:45\r\n * @FilePath: \\workflow_demo\\workflow-demo\\src\\components\\indexPage.vue\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n-->\r\n<template>\r\n  <div style=\"height: 100%; width: 100%\">\r\n    <workflow\r\n      :middleware-config=\"controllMiddleWareConfig\"\r\n      :controll-middleware=\"true\"\r\n      :flow-data=\"State.flowData\"\r\n      :edit=\"true\"\r\n    ></workflow>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport workflow from \"sun-flow\";\r\nimport { reactive, h } from \"vue\";\r\n\r\nconst State = reactive({\r\n  flowData: [\r\n    {\r\n      bodyContent: \"发起人1\",\r\n      nodeType: 1,\r\n    },\r\n    {\r\n      bodyContent: \"审核人1\",\r\n      nodeType: 2,\r\n    },\r\n    {\r\n      bodyContent: \"抄送人1\",\r\n      nodeType: 3,\r\n    },\r\n    {\r\n      bodyContent: \"办理人1\",\r\n      nodeType: 4,\r\n    },\r\n    {\r\n      nodeType: \"-2\",\r\n      children: [\r\n        [\r\n          {\r\n            nodeType: 5,\r\n            headerContent: \"条件01\",\r\n            bodyContent: \"这是01条件内容\",\r\n          },\r\n        ],\r\n        [\r\n          {\r\n            nodeType: 5,\r\n            headerContent: h(\"div\", { style: \"color:rgb(45, 112, 248)\" }, [\r\n              \"这是自定义标题\",\r\n            ]),\r\n            bodyContent: h(\"div\", { style: \"color:red\" }, [\"这是自定义内容\"]),\r\n          },\r\n        ],\r\n      ],\r\n    },\r\n  ],\r\n});\r\n\r\nconst controllMiddleWareConfig = {\r\n  /**\r\n   * @param {*} node\r\n   * @param {*} next\r\n   * @param {*} stop\r\n   */\r\n  add: function addNode(node, next) {\r\n    console.log(\"添加\", node);\r\n    next();\r\n  },\r\n  /**\r\n   * @param {*} node\r\n   * @param {*} next\r\n   * @param {*} stop\r\n   */\r\n  remove: function removeNode(node, next) {\r\n    console.log(\"移除\", node);\r\n    next();\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.active {\r\n  background: rgb(45, 112, 248);\r\n  color: #fff;\r\n}\r\n</style>\r\n","import script from \"./mid-flow.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./mid-flow.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./mid-flow.vue?vue&type=style&index=0&id=0e0471c4&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<!--\r\n * @Author: allensunjian Allen_sun_js@hotmail.com\r\n * @Date: 2023-04-22 09:41:53\r\n * @LastEditors: Please set LastEditors\r\n * @LastEditTime: 2023-04-27 16:48:27\r\n * @FilePath: \\workflow_demo\\workflow-demo\\src\\components\\indexPage.vue\r\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\r\n-->\r\n<template>\r\n  <div style=\"height: 100%; width: 100%\">\r\n    <workflow\r\n      :ref=\"getWorkflowIns\"\r\n      :panel-controlls=\"State.flowControlls\"\r\n      :middleware-config=\"controllMiddleWareConfig\"\r\n      :controll-middleware=\"true\"\r\n      :flow-data=\"State.flowData\"\r\n      :edit=\"State.flag\"\r\n      :scale=\"true\"\r\n      @body-click=\"bodyClick\"\r\n      @header-click=\"headerClick\"\r\n    ></workflow>\r\n    <span class=\"btn workflow__edit\" @click=\"State.flag = !State.flag\">{{\r\n      State.flag ? \"预览\" : \"编辑\"\r\n    }}</span>\r\n    <span class=\"btn workflow__edit\" style=\"top: 60px\" @click=\"getWorkflowData\"\r\n      >获取审批流数据</span\r\n    >\r\n    <el-drawer v-model=\"State.drawer\" :with-header=\"false\">\r\n      <div class=\"workflow__drawer_header\">\r\n        {{ State.currentNode.pos == \"header\" ? \"编辑header\" : \"编辑body\" }}\r\n      </div>\r\n      <div style=\"padding: 20px\">\r\n        <div style=\"text-align: left\">{{ State.currentNode.pos }}内容：</div>\r\n        <el-input size=\"small\" v-model=\"State.input\"></el-input>\r\n      </div>\r\n      <div>\r\n        <el-button type=\"primary\" size=\"small\" @click=\"submit\">保存</el-button>\r\n        <el-button size=\"small\" @click=\"State.drawer = false\">取消</el-button>\r\n      </div>\r\n    </el-drawer>\r\n    <el-dialog\r\n      v-model=\"syncModal.modal\"\r\n      :title=\"syncModal.modalTitle\"\r\n      width=\"30%\"\r\n    >\r\n      <div>\r\n        <div style=\"text-align: left\">header内容：</div>\r\n        <el-input\r\n          size=\"small\"\r\n          v-model=\"syncModal.modelParams.header\"\r\n        ></el-input>\r\n      </div>\r\n      <div>\r\n        <div style=\"text-align: left; margin-top: 20px\">body内容：</div>\r\n        <el-input size=\"small\" v-model=\"syncModal.modelParams.body\"></el-input>\r\n      </div>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"syncModal.modal = false\">Cancel</el-button>\r\n          <el-button type=\"primary\" @click=\"syncModal.modelSure\">\r\n            确定\r\n          </el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport workflow from \"../../../workflow_lib/workflow/workflow.js\";\r\nimport { reactive } from \"vue\";\r\nimport { ElMessageBox } from \"element-plus\";\r\nlet workflowIns = null;\r\n\r\nconst State = reactive({\r\n  input: \"\",\r\n  drawer: false,\r\n  flag: true,\r\n  currentNode: {\r\n    pos: null,\r\n    node: null,\r\n  },\r\n  flowData: [\r\n    {\r\n      nodeType: 1,\r\n    },\r\n  ],\r\n  flowControlls: [\r\n    {\r\n      nodeType: 2, //审批人\r\n      text: \"审批人\",\r\n      disabled: false,\r\n    },\r\n    {\r\n      nodeType: 3, //抄送人节点\r\n      text: \"抄送人\",\r\n      disabled: false,\r\n    },\r\n    {\r\n      nodeType: 4, //办理人节点\r\n      text: \"办理人\",\r\n      disabled: true,\r\n    },\r\n    {\r\n      nodeType: 6, //条件节点\r\n      text: \"条件\",\r\n      disabled: false,\r\n    },\r\n  ],\r\n});\r\n\r\nconst syncModal = reactive(\r\n  (() => {\r\n    let _callback = null;\r\n    let _node = null;\r\n    return {\r\n      modal: false,\r\n      nodeType: null,\r\n      modalTitle: \"\",\r\n      modelParams: {\r\n        header: \"\",\r\n        body: \"\",\r\n      },\r\n      modelSure() {\r\n        console.log(\"确定\", _node);\r\n        syncModal.modal = false;\r\n        _callback(syncModal.modelParams);\r\n      },\r\n      modelShow(callback, node) {\r\n        syncModal.modal = true;\r\n        syncModal.modalTitle = node.nodeName;\r\n        _callback = callback;\r\n        _node = node;\r\n      },\r\n    };\r\n  })()\r\n);\r\n\r\nconst controllMiddleWareConfig = {\r\n  /**\r\n   * @param {*} node\r\n   * @param {*} next\r\n   * @param {*} stop\r\n   */\r\n  add: function addNode(node, next) {\r\n    console.log(\"添加\", node);\r\n    if (node.nodeType !== 6) {\r\n      syncModal.modelShow(next, node);\r\n    } else next();\r\n  },\r\n  /**\r\n   * @param {*} node\r\n   * @param {*} next\r\n   * @param {*} stop\r\n   */\r\n  remove: async function removeNode(node, next) {\r\n    await ElMessageBox.confirm(\"确定删除该节点吗\", \"提示\", {\r\n      confirmButtonText: \"确定\",\r\n      cancelButtonText: \"取消\",\r\n    });\r\n    next();\r\n    console.log(\"移除\", node);\r\n  },\r\n};\r\n\r\nconst bodyClick = (node) => {\r\n  State.currentNode = {\r\n    node,\r\n    pos: \"body\",\r\n  };\r\n  State.input = node.bodyContent;\r\n  State.drawer = true;\r\n};\r\n\r\nconst headerClick = (node) => {\r\n  State.currentNode = {\r\n    pos: \"header\",\r\n    node,\r\n  };\r\n  State.input = node.headerContent;\r\n  State.drawer = true;\r\n};\r\n\r\nconst submit = () => {\r\n  console.log(\"提交\");\r\n  if (State.currentNode.pos == \"header\") {\r\n    State.currentNode.node.setHeader(State.input);\r\n  } else {\r\n    State.currentNode.node.setBody(State.input);\r\n  }\r\n\r\n  State.drawer = false;\r\n};\r\n\r\nconst getWorkflowIns = (ins) => {\r\n  workflowIns = ins;\r\n};\r\n\r\nconst getWorkflowData = () => {\r\n  alert(JSON.stringify(workflowIns.getFlowData()));\r\n};\r\n</script>\r\n<style>\r\n.workflow__drawer_header {\r\n  padding: 20px;\r\n  font-size: 16px;\r\n  text-align: left;\r\n}\r\n.workflow__edit {\r\n  position: fixed;\r\n  top: 20px;\r\n  left: 20px;\r\n}\r\n.btn {\r\n  background: rgb(45, 112, 248);\r\n  color: #fff;\r\n  padding: 6px 12px;\r\n  border-radius: 4px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n}\r\n.active {\r\n  background: rgb(45, 112, 248);\r\n  color: #fff;\r\n}\r\n</style>\r\n","import script from \"./full-flow.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./full-flow.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./full-flow.vue?vue&type=style&index=0&id=327864aa&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","<!--\n * @Author: allensunjian Allen_sun_js@hotmail.com\n * @Date: 2023-04-22 09:41:53\n * @LastEditors: Please set LastEditors\n * @LastEditTime: 2023-04-27 16:49:43\n * @FilePath: \\workflow_demo\\workflow-demo\\src\\components\\indexPage.vue\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n-->\n<template>\n  <div style=\"height: 100vh; width: 100vw\">\n    <div class=\"workflow__demo_tab\">\n      <span\n        class=\"workflow__demo_tabitem\"\n        :class=\"{ active: tabState.tabIndex == 1 }\"\n        @click=\"tabState.tabIndex = 1\"\n        >渲染审批流</span\n      >\n      <span\n        class=\"workflow__demo_tabitem\"\n        :class=\"{ active: tabState.tabIndex == 2 }\"\n        @click=\"tabState.tabIndex = 2\"\n        >编辑审批流</span\n      >\n      <span\n        class=\"workflow__demo_tabitem\"\n        :class=\"{ active: tabState.tabIndex == 3 }\"\n        @click=\"tabState.tabIndex = 3\"\n        >手动渲染审批流</span\n      >\n      <span\n        class=\"workflow__demo_tabitem\"\n        :class=\"{ active: tabState.tabIndex == 4 }\"\n        @click=\"tabState.tabIndex = 4\"\n        >操作中间件</span\n      >\n      <span\n        class=\"workflow__demo_tabitem\"\n        :class=\"{ active: tabState.tabIndex == 5 }\"\n        @click=\"tabState.tabIndex = 5\"\n        >全功能</span\n      >\n    </div>\n    <div class=\"workflow__view\">\n      <base-flow v-if=\"tabState.tabIndex == 1\"></base-flow>\n      <edit-flow v-if=\"tabState.tabIndex == 2\"></edit-flow>\n      <handle-flow v-if=\"tabState.tabIndex == 3\"></handle-flow>\n      <mid-flow v-if=\"tabState.tabIndex == 4\"></mid-flow>\n      <full-flow v-if=\"tabState.tabIndex == 5\"></full-flow>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport baseFlow from \"./subs/base-flow.vue\";\nimport editFlow from \"./subs/edit-flow.vue\";\nimport handleFlow from \"./subs/handle-render-flow.vue\";\nimport midFlow from \"./subs/mid-flow.vue\";\nimport fullFlow from \"./subs/full-flow.vue\";\nimport { reactive } from \"vue\";\n\nconst tabState = reactive({\n  tabIndex: 1,\n});\n</script>\n<style>\n.workflow__view {\n  height: calc(100vh - 42px);\n}\n.workflow__demo_tab {\n  display: flex;\n  justify-content: center;\n}\n.workflow__demo_tabitem {\n  height: 40px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  flex: 0 0 120px;\n  text-align: center;\n  border: 1px solid #eee;\n  cursor: pointer;\n}\n.active {\n  background: rgb(45, 112, 248);\n  color: #fff;\n}\n</style>\n","import script from \"./indexPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./indexPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./indexPage.vue?vue&type=style&index=0&id=6eeed593&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=0b68adb5\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=0b68adb5&lang=css\"\n\nimport exportComponent from \"D:\\\\github_project\\\\sun-flow\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/*\n * @Author: allensunjian Allen_sun_js@hotmail.com\n * @Date: 2023-04-22 09:41:53\n * @LastEditors: Please set LastEditors\n * @LastEditTime: 2023-04-27 15:10:53\n * @FilePath: \\workflow_demo\\workflow-demo\\src\\main.js\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\nimport { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport Element from \"element-plus\";\n// import \"sun-flow/workflow_lib/lib/workflow.css\";\nimport \"../workflow_lib/lib/workflow.css\";\nimport \"element-plus/lib/theme-chalk/index.css\";\ncreateApp(App).use(Element).mount(\"#app\");\n","/*\r\n * Copyright (c) 2023 by Allen_sun email: Allen_sun_js@hotmail.com, All Rights Reserved.\r\n */\r\n// 常规节点size-map\r\nlet RoutineNodeSize = {\r\n  width: 200,\r\n  headerHeight: 32,\r\n};\r\n\r\nexport { RoutineNodeSize };\r\n","/*\r\n * Copyright (c) 2023 by Allen_sun email: Allen_sun_js@hotmail.com, All Rights Reserved.\r\n */\r\nimport { RoutineNodeSize } from \"../config/config\";\r\n\r\n/**\r\n * type: 0 // 特殊大类\r\n * nodeType 0 开始节点 -1 结束节点\r\n */\r\nclass ProcessNode {\r\n  constructor(nodeType, text, { nodeRender }) {\r\n    this.nodeType = nodeType;\r\n    this.text = text;\r\n    this.width = 16;\r\n    this.height = 16;\r\n    this.fontSize = 14;\r\n    this.bgColor = \"#E6E6E6\";\r\n    this.type = 0;\r\n    this.nodeRender = nodeRender;\r\n    this.reference = [];\r\n    this.pos = 0;\r\n    this.parentNode = null;\r\n    this.parentNode = null;\r\n    this.parentNodeIndex = -1;\r\n  }\r\n  setReference(reference, pos) {\r\n    this.reference = reference;\r\n    this.pos = pos;\r\n  }\r\n  setParentNode(parentNode, parentNodeIndex) {\r\n    this.parentNode = parentNode;\r\n    this.parentNodeIndex = parentNodeIndex;\r\n  }\r\n}\r\n\r\n/**\r\n * 大类 type 2\r\n * nodeType -2 条件分支节点\r\n */\r\nclass AddConditionNode {\r\n  constructor({ nodeRender, removeNodeMethod }) {\r\n    this.type = 2;\r\n    this.nodeType = -2;\r\n    this.width = 72;\r\n    this.height = 24;\r\n    this.title = \"添加条件\";\r\n    this.reference = [];\r\n    this.currentProcess = [];\r\n    this.pos = 0;\r\n    this.parentNode = null;\r\n    this.parentNodeIndex = -1;\r\n    // 节点渲染外置方法\r\n    this.nodeRender = nodeRender;\r\n    // 删除节点外置方法\r\n    this.removeNode = removeNodeMethod;\r\n  }\r\n  setReference(reference, pos) {\r\n    this.reference = reference;\r\n    this.pos = pos;\r\n  }\r\n  setParentNode(parentNode, parentNodeIndex) {\r\n    this.parentNode = parentNode;\r\n    this.parentNodeIndex = parentNodeIndex;\r\n  }\r\n  setCurrentProcess(process, pos) {\r\n    this.currentProcess = process;\r\n    // 这里的pos是准确的\r\n    this.pos = pos;\r\n  }\r\n}\r\n\r\n// 原始节点 大类 type: 1\r\nclass OriginalNode {\r\n  constructor(\r\n    headerBg,\r\n    title,\r\n    titleColor = \"#fff\",\r\n    { nodeRender, removeNodeMethod }\r\n  ) {\r\n    this.width = RoutineNodeSize.width;\r\n    this.headerHeight = RoutineNodeSize.headerHeight;\r\n    this.headerBg = headerBg;\r\n    this.title = title;\r\n    this.type = 1;\r\n    this.titleColor = titleColor;\r\n    this.nodeRender = nodeRender;\r\n    this.reference = [];\r\n    this.pos = 0;\r\n    this.parentNode = null;\r\n    this.parentNodeIndex = -1;\r\n    this.removeNode = removeNodeMethod;\r\n  }\r\n  setReference(reference, pos) {\r\n    this.reference = reference;\r\n    this.pos = pos;\r\n  }\r\n  setParentNode(parentNode, parentNodeIndex) {\r\n    this.parentNode = parentNode;\r\n    this.parentNodeIndex = parentNodeIndex;\r\n  }\r\n}\r\n\r\n// nodeType 1 发起人节点\r\nclass InitiatorNode extends OriginalNode {\r\n  constructor({ nodeRender, removeNodeMethod }) {\r\n    super(\"#46608C\", \"发起人\", \"#fff\", { nodeRender, removeNodeMethod });\r\n    this.nodeType = 1;\r\n  }\r\n}\r\n\r\n// nodeType 2 审批人节点\r\nclass ApproverNode extends OriginalNode {\r\n  constructor({ nodeRender, removeNodeMethod }) {\r\n    super(\"#F0A818\", \"审批人\", \"#fff\", { nodeRender, removeNodeMethod });\r\n    this.nodeType = 2;\r\n  }\r\n}\r\n\r\n// nodeType 3 抄送人节点\r\nclass CcNode extends OriginalNode {\r\n  constructor({ nodeRender, removeNodeMethod }) {\r\n    super(\"#2D70F8\", \"抄送人\", \"#fff\", { nodeRender, removeNodeMethod });\r\n    this.nodeType = 3;\r\n  }\r\n}\r\n\r\n// nodeType 4 办理人节点\r\nclass AgentNode extends OriginalNode {\r\n  constructor({ nodeRender, removeNodeMethod }) {\r\n    super(\"#E01738\", \"办理人\", \"#fff\", { nodeRender, removeNodeMethod });\r\n    this.nodeType = 4;\r\n  }\r\n}\r\n\r\n// nodeType 5 条件节点\r\nclass ConditionNode extends OriginalNode {\r\n  constructor({ nodeRender, removeNodeMethod }) {\r\n    super(\"#fff\", `条件`, \"#76CC20\", { nodeRender, removeNodeMethod });\r\n    this.nodeType = 5;\r\n  }\r\n}\r\n\r\nexport {\r\n  ProcessNode,\r\n  AddConditionNode,\r\n  InitiatorNode,\r\n  ApproverNode,\r\n  CcNode,\r\n  AgentNode,\r\n  ConditionNode,\r\n};\r\n","/*\r\n * Copyright (c) 2023 by Allen_sun email: Allen_sun_js@hotmail.com, All Rights Reserved.\r\n */\r\n\r\nimport { h } from \"vue\";\r\n\r\nimport icon_ApproverNode from \"./img/icon_ApproverNode.png\";\r\nimport icon_CcNode from \"./img/icon_CcNode.png\";\r\nimport ico_AgentNode from \"./img/ico_AgentNode.png\";\r\nimport icon_ConditionNode from \"./img/icon_ConditionNode.png\";\r\nimport icon_add from \"./img/icon_add.png\";\r\nimport icon_close from \"./img/icon_close.png\";\r\nimport icon_close_white from \"./img/icon_close--white.png\";\r\nimport icon_arrow_right from \"./img/icon_arrow_right.png\";\r\nimport {\r\n  ProcessNode,\r\n  AddConditionNode,\r\n  InitiatorNode,\r\n  ApproverNode,\r\n  CcNode,\r\n  AgentNode,\r\n  ConditionNode,\r\n} from \"./abstract/baseClass\";\r\n\r\n// the end of next line is controll-panel renderer\r\nlet renderedPanelInstances = [];\r\n\r\nconst AbstractControllBtn = function (\r\n  text,\r\n  handleClass,\r\n  nodeType,\r\n  icon,\r\n  disabled,\r\n  scope,\r\n  currentNode,\r\n  parentNode\r\n) {\r\n  return h(\r\n    \"div\",\r\n    {\r\n      class: [\r\n        \"workflow__controll_btn\",\r\n        handleClass,\r\n        disabled ? \"workflow__controll_disabled\" : \"\",\r\n      ],\r\n      onclick: function () {\r\n        if (disabled) return;\r\n        const middleware = middlewareDispatchCenter(\"add\", {\r\n          nodeName: text,\r\n          nodeType,\r\n          currentNode,\r\n        });\r\n        middleware.then(({ header, body } = {}) => {\r\n          if (nodeType == 6) {\r\n            // [添加条件] 节点\r\n            if (currentNode.nodeType == -2) {\r\n              parentNode.splice(\r\n                currentNode.pos + 1,\r\n                0,\r\n                renderMethods.getConditionGroup()\r\n              );\r\n            } else {\r\n              currentNode.reference.splice(\r\n                currentNode.pos + 1,\r\n                0,\r\n                renderMethods.getConditionGroup()\r\n              );\r\n            }\r\n            return;\r\n          }\r\n\r\n          let AbstractNode = eval(`new ${NodeCreaterMap[nodeType]}()`);\r\n          if (header) AbstractNode.setHeader(header);\r\n          if (body) AbstractNode.setBody(body);\r\n          // 添加条件节点 后增加其它节点\r\n          if (currentNode.nodeType == -2) {\r\n            if (nodeType == 6)\r\n              return console.error(\r\n                \"创建节点错误\",\r\n                \"条件节点下不允许条件节点的存在\"\r\n              );\r\n            return currentNode.currentProcess.splice(currentNode.pos + 1, 0, {\r\n              node: AbstractNode,\r\n            });\r\n          }\r\n          currentNode.reference.splice(currentNode.pos + 1, 0, {\r\n            node: AbstractNode,\r\n          });\r\n        });\r\n      },\r\n    },\r\n    [\r\n      h(\"img\", {\r\n        class: \"workflow__controll_icon\",\r\n        src: icon,\r\n      }),\r\n      text,\r\n    ]\r\n  );\r\n};\r\nconst controllPanelInstance = (currentNode, parentNode) => {\r\n  const defaultControllIcon = {\r\n    2: icon_ApproverNode,\r\n    3: icon_CcNode,\r\n    4: ico_AgentNode,\r\n    6: icon_ConditionNode,\r\n  };\r\n  const defaultControlls = [\r\n    [\"审批人\", \"\", 2, icon_ApproverNode, false],\r\n    [\"抄送人\", \"\", 3, icon_CcNode, false],\r\n    [\"办理人\", \"\", 4, ico_AgentNode, false],\r\n    [\"条件\", \"\", 6, icon_ConditionNode, false],\r\n  ];\r\n  const Panel = (scope) => {\r\n    let controlls = [];\r\n    if (REF.panelControlls && REF.panelControlls.length > 0) {\r\n      controlls = REF.panelControlls.map((controll) => [\r\n        controll.text,\r\n        controll.class,\r\n        controll.nodeType,\r\n        defaultControllIcon[controll.nodeType],\r\n        controll.disabled,\r\n      ]);\r\n    } else {\r\n      controlls = defaultControlls;\r\n    }\r\n    return h(\r\n      \"div\",\r\n      {\r\n        class: \"workflow__controll_panel\",\r\n      },\r\n      controlls.map((btnInfo) =>\r\n        AbstractControllBtn.apply(null, [\r\n          ...btnInfo,\r\n          scope,\r\n          currentNode,\r\n          parentNode,\r\n        ])\r\n      )\r\n    );\r\n  };\r\n\r\n  const AddBtn = function (handleClass, panel, scope) {\r\n    return h(\r\n      \"div\",\r\n      {\r\n        class: `workflow__addbtn ${handleClass}`,\r\n        onclick: function () {\r\n          renderedPanelInstances.forEach((ins) => (ins.showPanel = false));\r\n          scope.showPanel = true;\r\n        },\r\n      },\r\n      [\r\n        h(\"img\", { src: icon_add, class: \"workflow__addbtn\" }),\r\n        scope.showPanel ? panel : \"\",\r\n      ]\r\n    );\r\n  };\r\n\r\n  return {\r\n    render: function () {\r\n      renderedPanelInstances.push(this);\r\n      return REF.edit ? AddBtn(this.handleClass, Panel(this), this) : \"\";\r\n    },\r\n    props: {\r\n      handleClass: {\r\n        type: String,\r\n        default: \"\",\r\n      },\r\n    },\r\n    data: () => ({\r\n      showPanel: false,\r\n    }),\r\n  };\r\n};\r\n\r\n// the end of next line is workflow\r\nlet REF = null;\r\n\r\nlet renderMethods = {\r\n  0: function (scope, zIndex) {\r\n    return h(\r\n      \"div\",\r\n      {\r\n        class: [\r\n          `workflow__relative workflow__node_${\r\n            scope.nodeType == 0 ? \"start\" : \"end\"\r\n          }`,\r\n        ],\r\n        style: `z-index: ${zIndex}`,\r\n      },\r\n      [\r\n        h(\"div\", {\r\n          class: \"workflow__node_point\",\r\n          style: `width: ${scope.width}px;height:${scope.height}px;background:${scope.bgColor}`,\r\n        }),\r\n        h(\r\n          \"span\",\r\n          { style: `foint-size:${scope.fontSize}px;color:${scope.bgColor}` },\r\n          scope.nodeType == 0 ? \"开始节点\" : \"结束节点\"\r\n        ),\r\n      ]\r\n    );\r\n  },\r\n  1: (scope, zIndex) => {\r\n    // nodeType == 1 无法被删除， 因为是开始节点\r\n    return h(\r\n      \"div\",\r\n      {\r\n        class:\r\n          \"workflow__relative wokflow__node workflow__cursor \" +\r\n          \"workflow__node_\" +\r\n          scope.nodeType,\r\n        style: `width:${scope.width}px;z-index: ${zIndex}`,\r\n      },\r\n      [\r\n        h(\r\n          \"div\",\r\n          {\r\n            class: \"workflow__header\",\r\n            style: `height: ${scope.headerHeight}px;background:${scope.headerBg};color:${scope.titleColor}`,\r\n            onclick: headerClick(scope),\r\n          },\r\n          [\r\n            scope.getHeaderContent(),\r\n            scope.nodeType == 1\r\n              ? \"\"\r\n              : REF.edit\r\n              ? h(\"img\", {\r\n                  class: \"workflow__header_close\",\r\n                  onclick: scope.removeNode.bind(scope),\r\n                  src: icon_close,\r\n                })\r\n              : \"\",\r\n          ]\r\n        ),\r\n        h(\r\n          \"div\",\r\n          {\r\n            class: \"workflow__body\",\r\n            onclick: bodyClick(scope),\r\n          },\r\n          [scope.getBodyContent()]\r\n        ),\r\n        h(controllPanelInstance(scope), {\r\n          handleClass: \"workflow__addbtn_1\",\r\n        }),\r\n      ]\r\n    );\r\n  },\r\n  2: (scope, zIndex) => {\r\n    return h(\r\n      \"div\",\r\n      {\r\n        class: \"workflow__node_condition workflow__cursor\",\r\n        style: `height:${scope.height}px;width:${scope.width}px;z-index: ${\r\n          zIndex + 999\r\n        };${REF.edit ? \"opacity:1;\" : \"opacity:0;margin-bottom: 0\"}`,\r\n        onclick() {\r\n          if (!REF.edit) return;\r\n          const middleware = middlewareDispatchCenter(\"add\", {\r\n            nodeName: \"条件\",\r\n            nodeType: 5,\r\n            currentNode: scope.orginInfo,\r\n          });\r\n          middleware.then(() => {\r\n            scope.reference.push([\r\n              { node: new UseConditionNode({ num: scope.reference.length }) },\r\n            ]);\r\n          });\r\n        },\r\n      },\r\n      [\r\n        \"添加条件\",\r\n        REF.edit\r\n          ? h(\"img\", {\r\n              class: \"workflow__header_close\",\r\n              onclick: scope.removeNode.bind(scope),\r\n              src: icon_close_white,\r\n            })\r\n          : \"\",\r\n      ]\r\n    );\r\n  },\r\n  3: (scope, zIndex) => {\r\n    return h(\"span\", {\r\n      class: \"supplement__line\",\r\n      style: `z-index: ${zIndex}`,\r\n    });\r\n  },\r\n  getConditionGroup: () => ({\r\n    node: new UseAddConditionNode(),\r\n    children: [\r\n      [{ node: new UseConditionNode({ num: 1 }) }],\r\n      [{ node: new UseConditionNode({ num: 2 }) }],\r\n    ],\r\n  }),\r\n};\r\n/***\r\n * middlewareDispatchCenter 控制中间件 调度中心\r\n * @controllType add/remove/edit/search 增删改查\r\n * 提供 当前节点信息(scope) next函数（手动控制删除） stop(终止当前操作)\r\n **/\r\n\r\nconst middlewareDispatchCenter = (controllType, scope) => {\r\n  return new Promise((next, stop) => {\r\n    if (REF.controllMiddleware) {\r\n      if (REF.middlewareConfig && REF.middlewareConfig[controllType]) {\r\n        REF.middlewareConfig[controllType](scope, next, stop);\r\n      } else {\r\n        console.error(\"暂无控制中间件【\" + controllType + \"】\");\r\n        stop();\r\n      }\r\n    } else next();\r\n  });\r\n};\r\n// 节点挂在的真是节点render方法\r\nconst nodeRender = function (zIndex) {\r\n  return renderMethods[this.type] && renderMethods[this.type](this, zIndex);\r\n};\r\n// 节点真是挂在的删除节点方法\r\nconst removeNodeMethod = function (e) {\r\n  const nodeType = this.nodeType;\r\n  // const reference = this.reference;\r\n  const referencePos = this.pos;\r\n  const parentNode = this.parentNode;\r\n  const parentNodePos = this.parentNodeIndex;\r\n  // 两个节点以下无法删除\r\n  if (nodeType == 5) {\r\n    if (parentNode.length <= 2)\r\n      return REF.$emit(\"error\", { text: \"至少保留两个节点\", errcode: 1 });\r\n  }\r\n\r\n  const middleware = middlewareDispatchCenter(\"remove\", this);\r\n  middleware.then(() => {\r\n    if (nodeType == 5) {\r\n      // 删除条件节点其中一个\r\n      if (parentNode.length <= 2) {\r\n        return console.error(\"至少两个条件\");\r\n      }\r\n      return parentNode.splice(parentNodePos, 1);\r\n    }\r\n\r\n    if (nodeType == -2) {\r\n      return this.currentProcess.splice(this.pos, 1);\r\n    }\r\n    this.reference.splice(referencePos, 1);\r\n  });\r\n\r\n  e.stopPropagation();\r\n};\r\n// 节点真实挂载 setNodeOriginInfo 方法\r\nconst setNodeOriginInfo = function (orginInfo) {\r\n  this.orginInfo = orginInfo;\r\n};\r\nconst headerClick = (node) =>\r\n  function () {\r\n    REF.$emit(\"headerClick\", node);\r\n  };\r\nconst bodyClick = (node) =>\r\n  function () {\r\n    REF.$emit(\"bodyClick\", node);\r\n  };\r\n// header 自定义内容渲染函数\r\nconst handlerHeaderRender = function (content) {\r\n  this.headerContent = content;\r\n};\r\n\r\n// body 自定义内容渲染函数\r\nconst handlerBodyRender = function (content) {\r\n  this.bodyContent = content;\r\n};\r\n\r\nconst getHeaderContent = function () {\r\n  return this.headerContent ? this.headerContent : this.title;\r\n};\r\n\r\nconst getBodyContent = function () {\r\n  return this.bodyContent\r\n    ? this.bodyContent\r\n    : h(\r\n        \"div\",\r\n        { style: \"display: flex;justify-content: space-between;color:#BFBFBF\" },\r\n        [\r\n          h(\"span\", {}, [`请设置${this.title}`]),\r\n          h(\r\n            \"img\",\r\n            { class: \"workflow__body_arrow\", src: icon_arrow_right },\r\n            []\r\n          ),\r\n        ]\r\n      );\r\n};\r\n\r\n// class AbstractBuilinMethods {\r\n//   constructor() {\r\n//     this.nodeRender = nodeRender;\r\n//     this.removeNodeMethod = removeNodeMethod;\r\n//   }\r\n// }\r\n\r\n// todo: 在原始类中 不应该包括业务方法和属性 需要提出来 比如 nodeRender, removeNodeMethod 之类\r\n// /**\r\n//  * type: 0 // 特殊大类\r\n//  * nodeType 0 开始节点 -1 结束节点\r\n//  */\r\nclass UseStartProcessNode extends ProcessNode {\r\n  constructor() {\r\n    super(0, \"开始节点\", { nodeRender, removeNodeMethod });\r\n  }\r\n}\r\n\r\nclass UseEndProcessNode extends ProcessNode {\r\n  constructor() {\r\n    super(-1, \"结束节点\", { nodeRender, removeNodeMethod });\r\n  }\r\n}\r\n\r\n// /**\r\n//  * 大类 type 2\r\n//  * nodeType -2 条件分支节点\r\n//  */\r\nclass UseAddConditionNode extends AddConditionNode {\r\n  constructor() {\r\n    super({ nodeRender, removeNodeMethod });\r\n    this.setNodeOriginInfo = setNodeOriginInfo;\r\n    this.setBody = handlerBodyRender;\r\n    this.setHeader = handlerHeaderRender;\r\n    this.headerContent = null;\r\n    this.bodyContent = null;\r\n    this.getHeaderContent = getHeaderContent;\r\n    this.getBodyContent = getBodyContent;\r\n  }\r\n}\r\n\r\n// nodeType 1 发起人节点\r\nclass UseInitiatorNode extends InitiatorNode {\r\n  constructor() {\r\n    super({ nodeRender, removeNodeMethod });\r\n    this.setNodeOriginInfo = setNodeOriginInfo;\r\n    this.setBody = handlerBodyRender;\r\n    this.setHeader = handlerHeaderRender;\r\n    this.headerContent = null;\r\n    this.bodyContent = null;\r\n    this.getHeaderContent = getHeaderContent;\r\n    this.getBodyContent = getBodyContent;\r\n  }\r\n}\r\n\r\n// nodeType 2 审批人节点\r\nclass UseApproverNode extends ApproverNode {\r\n  constructor() {\r\n    super({ nodeRender, removeNodeMethod });\r\n    this.setNodeOriginInfo = setNodeOriginInfo;\r\n    this.setBody = handlerBodyRender;\r\n    this.setHeader = handlerHeaderRender;\r\n    this.headerContent = null;\r\n    this.bodyContent = null;\r\n    this.getHeaderContent = getHeaderContent;\r\n    this.getBodyContent = getBodyContent;\r\n  }\r\n}\r\n\r\n// nodeType 3 抄送人节点\r\nclass UseCcNode extends CcNode {\r\n  constructor() {\r\n    super({ nodeRender, removeNodeMethod });\r\n    this.setNodeOriginInfo = setNodeOriginInfo;\r\n    this.setBody = handlerBodyRender;\r\n    this.setHeader = handlerHeaderRender;\r\n    this.headerContent = null;\r\n    this.bodyContent = null;\r\n    this.getHeaderContent = getHeaderContent;\r\n    this.getBodyContent = getBodyContent;\r\n  }\r\n}\r\n\r\n// nodeType 4 办理人节点\r\nclass UseAgentNode extends AgentNode {\r\n  constructor() {\r\n    super({ nodeRender, removeNodeMethod });\r\n    this.setNodeOriginInfo = setNodeOriginInfo;\r\n    this.setBody = handlerBodyRender;\r\n    this.setHeader = handlerHeaderRender;\r\n    this.headerContent = null;\r\n    this.bodyContent = null;\r\n    this.getHeaderContent = getHeaderContent;\r\n    this.getBodyContent = getBodyContent;\r\n  }\r\n}\r\n\r\n// nodeType 5 条件节点\r\nclass UseConditionNode extends ConditionNode {\r\n  constructor() {\r\n    super({ nodeRender, removeNodeMethod });\r\n    this.setNodeOriginInfo = setNodeOriginInfo;\r\n    this.setBody = handlerBodyRender;\r\n    this.setHeader = handlerHeaderRender;\r\n    this.headerContent = null;\r\n    this.bodyContent = null;\r\n    this.getHeaderContent = getHeaderContent;\r\n    this.getBodyContent = getBodyContent;\r\n  }\r\n}\r\n\r\nconst NodeCreaterMap = {\r\n  1: \"UseInitiatorNode\",\r\n  2: \"UseApproverNode\",\r\n  3: \"UseCcNode\",\r\n  4: \"UseAgentNode\",\r\n  5: \"UseConditionNode\",\r\n  \"-2\": \"UseAddConditionNode\",\r\n  // 防止被tree shark\r\n  UseAgentNode,\r\n  UseCcNode,\r\n  UseApproverNode,\r\n  UseInitiatorNode,\r\n};\r\n\r\n// workflow 类\r\nclass WorkFlow {\r\n  constructor(nodes) {\r\n    this.nodes = nodes;\r\n  }\r\n  renderFlow() {\r\n    const workFlowGroup = (children, tail, handleClass, zIndex, sort) => {\r\n      return h(\r\n        \"div\",\r\n        {\r\n          class: [\r\n            tail ? \"workflow__group_tail\" : \"workflow__group\",\r\n            handleClass,\r\n            \"workflow__group--\" + `${sort}`,\r\n          ],\r\n          style: zIndex ? `z-index:${zIndex}` : \"\",\r\n        },\r\n        children\r\n      );\r\n    };\r\n    let outer = 0;\r\n    let inner = 0;\r\n    const createShortFlow = (\r\n      { nodes, temp, parentNode, parentIndex },\r\n      zIndex\r\n    ) => {\r\n      let maxIndex = nodes.length;\r\n      outer++;\r\n      const currentNodes = temp ? [...nodes, temp] : nodes;\r\n      return workFlowGroup(\r\n        currentNodes.map((nodeIns, index) => {\r\n          if (nodeIns.node.nodeType == -2) {\r\n            // 条件分支情况下；引用自己的子列表,并创建当前流程引用 用于新增\r\n            nodeIns.node.setReference(nodeIns.children);\r\n            nodeIns.node.setCurrentProcess(nodes, index);\r\n          }\r\n          if (nodeIns.children)\r\n            return (() => {\r\n              maxIndex--;\r\n              // temp 用于生成 3 类型节点 （该节点是节点末尾补齐的线）\r\n              let temp = () => ({\r\n                node: {\r\n                  type: 3,\r\n                  nodeRender,\r\n                  setReference: () => {},\r\n                  setParentNode: () => {},\r\n                },\r\n              });\r\n              const retVnode = workFlowGroup(\r\n                [\r\n                  nodeIns.node.nodeRender(maxIndex),\r\n                  // 只有nodeIns.children 时（添加条件节点-条件分支时需要补全）\r\n                  workFlowGroup(\r\n                    nodeIns.children.map((child, index) =>\r\n                      createShortFlow(\r\n                        {\r\n                          nodes: child,\r\n                          temp: temp(),\r\n                          parentNode: nodeIns.children,\r\n                          parentIndex: index,\r\n                        },\r\n                        nodeIns.children.length - index\r\n                      )\r\n                    ),\r\n                    \"tail\",\r\n                    \"\",\r\n                    currentNodes.length - index,\r\n                    `${outer}${inner++}`\r\n                  ),\r\n                  h(controllPanelInstance(nodeIns.node, nodes), {\r\n                    handleClass: \"workflow__addbtn_tail\",\r\n                  }),\r\n                ],\r\n                false,\r\n                \"workflow__tail_wrap\",\r\n                maxIndex,\r\n                `${outer}${inner++}`\r\n              );\r\n              return retVnode;\r\n            })();\r\n          maxIndex--;\r\n          // 当前node 所处的 数组中 以及位置\r\n          nodeIns.node.setReference(nodes, index);\r\n          // 当前node的 父节点列表 以及父节点所在的 列表中的位置\r\n          nodeIns.node.setParentNode(parentNode, parentIndex);\r\n          return nodeIns.node.nodeRender(maxIndex);\r\n        }),\r\n        false,\r\n        \"\",\r\n        zIndex,\r\n        `${outer}${inner++}`\r\n      );\r\n    };\r\n    return createShortFlow({ nodes: this.nodes });\r\n  }\r\n}\r\n\r\n/**\r\n * 计算tail边界的原因:\r\n * 如果“条件分支类型”的节点出现在tail内部，上线的边框计算不会出现问题 计算方式 calc(100% 減去 一个node类型的宽度)\r\n * 如果\"条件分支类型\"的节点出现在tail的第一个和第二个内，由于节点的横向的node数量变多导致 计算出现错误 上下边框会超过正确宽度\r\n * 计算方法：每当flow节点发生更新则重新计算所有tail 节点内部的 第一和最后的宽度 来给 计算方式 赋值\r\n * */\r\nconst computedTailBorder = function () {\r\n  let targetStyleTar = document.getElementById(\"tailBeforeStyle\");\r\n  let textStyleSheet = \"\";\r\n  if (!targetStyleTar) {\r\n    targetStyleTar = document.createElement(\"style\");\r\n    targetStyleTar.setAttribute(\"id\", \"tailBeforeStyle\");\r\n    targetStyleTar.setAttribute(\"type\", \"text/css\");\r\n    document.body.appendChild(targetStyleTar);\r\n  } else {\r\n    targetStyleTar.innerHTML = \"\";\r\n  }\r\n\r\n  Array.prototype.forEach.call(\r\n    document.getElementsByClassName(\"workflow__tail_wrap\"),\r\n    (wrap) => {\r\n      const tail = Array.prototype.find.call(\r\n        wrap.childNodes,\r\n        (wc) => wc.className.indexOf(\"workflow__group_tail\") >= 0\r\n      );\r\n      if (tail) {\r\n        const children = tail.childNodes;\r\n        const first = children[0];\r\n        const last = children[children.length - 1];\r\n        const pc = Array.prototype.find.call(\r\n          wrap.classList,\r\n          (classname) => classname.indexOf(\"workflow__group--\") >= 0\r\n        );\r\n        textStyleSheet += `\r\n                .${pc}>.workflow__group_tail::after {width: calc(100% - ${\r\n          first.offsetWidth / 2 + last.offsetWidth / 2 - 2\r\n        }px) !important;left:${first.offsetWidth / 2 - 1}px !important}\r\n                .${pc}>.workflow__group_tail::before {width: calc(100% - ${\r\n          first.offsetWidth / 2 + last.offsetWidth / 2 - 2\r\n        }px) !important;left:${first.offsetWidth / 2}px !important}\r\n                `;\r\n      }\r\n    }\r\n  );\r\n  targetStyleTar.innerHTML = textStyleSheet;\r\n};\r\nconst WorkFlowVnode = function () {\r\n  return {\r\n    props: {\r\n      flowData: {\r\n        type: Object,\r\n        default: () => [],\r\n      },\r\n    },\r\n    render: function () {\r\n      const FlowIns = new WorkFlow(this.flowData);\r\n      return FlowIns.renderFlow();\r\n    },\r\n    mounted: computedTailBorder,\r\n    updated: computedTailBorder,\r\n  };\r\n};\r\n\r\n/**\r\n * nodeType 节点类型 （节点指在页面上 直接展示参与到审批流中的类型）\r\n * 特殊节点：0 开始节点 -1 结束节点 -2 条件分支节点\r\n * 常规节点：1 发起人节点 2 审批人节点 3 抄送人节点 4 办理人节点 5 条件节点\r\n */\r\n\r\nconst getStartNodeInfo = () => ({\r\n  node: new UseStartProcessNode(),\r\n});\r\ngetStartNodeInfo;\r\nconst getEndNodeInfo = () => ({\r\n  node: new UseEndProcessNode(),\r\n});\r\n\r\nexport default {\r\n  name: \"workflow\",\r\n  render: function () {\r\n    return h(\r\n      \"div\",\r\n      {\r\n        class: \"workflow\",\r\n        id: \"SUN_WORKFLOW_TARGET\",\r\n      },\r\n      [\r\n        h(WorkFlowVnode(), {\r\n          flowData: this.privateFlowData,\r\n          style: `${this.scale ? `transform:scale(${this.scaleSize})` : \"\"}`,\r\n        }),\r\n        this.scale\r\n          ? h(\"div\", { class: \"workflow_indicator\" }, [\r\n              h(\r\n                \"span\",\r\n                {\r\n                  class: \"workflow_indicator_btn\",\r\n                  onclick: () => {\r\n                    if (this.scaleSize <= 0.5) return;\r\n                    this.scaleSize -= 0.1;\r\n                  },\r\n                },\r\n                [\"-\"]\r\n              ),\r\n              h(\r\n                \"span\",\r\n                {\r\n                  class: \"workflow_indicator_btn\",\r\n                  onclick: () => {\r\n                    if (this.scaleSize >= 1) return;\r\n                    this.scaleSize += 0.1;\r\n                  },\r\n                },\r\n                [\"+\"]\r\n              ),\r\n              h(\r\n                \"span\",\r\n                {\r\n                  class: \"workflow_indicator_reset\",\r\n                  onclick: () => (this.scaleSize = 1),\r\n                },\r\n                [\"重置\"]\r\n              ),\r\n              h(\"span\", { class: \"workflow_indicator_size\" }, [\r\n                `缩放：${parseInt(this.scaleSize * 100)}%`,\r\n              ]),\r\n            ])\r\n          : \"\",\r\n      ]\r\n    );\r\n  },\r\n  data: () => ({\r\n    privateFlowData: [],\r\n    scaleSize: 1,\r\n  }),\r\n  props: {\r\n    /**\r\n     * @scale 开启手动控制方法缩小\r\n     **/\r\n    scale: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    /**\r\n     * @controllMiddleware\r\n     * 开启控制中间件与middlewareConfig 配合插入 \"增删改查\" 控件\r\n     * */\r\n    controllMiddleware: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    /**\r\n     * @middlewareConfig\r\n     * controllMiddleware开启中配置该选项 生效\r\n     * */\r\n    middlewareConfig: {\r\n      type: Object,\r\n      default: () => ({\r\n        // add: function add(node, next, stop) {\r\n        //     console.log(\"add\", node);\r\n        //     next()\r\n        // },\r\n        // remove: function remove(node, next, stop) {\r\n        //     console.log(\"remove\", node);\r\n        //     next()\r\n        // },\r\n        // edit: function edit(node, next, stop) {\r\n        //     console.log(\"edit\", node);\r\n        //     next()\r\n        // },\r\n        // search: function search() {\r\n        //     console.log(\"search\")\r\n        // }\r\n      }),\r\n    },\r\n    /**\r\n     * flowData 识别的结构是 [{},{},{children:[[],[]]}]\r\n     */\r\n    flowData: {\r\n      type: Object,\r\n      default: () => ({}),\r\n    },\r\n    /**\r\n     * @midRender\r\n     * 如果nodeType 和内置类型一致那么 无需开启midRender\r\n     * */\r\n    midRender: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    /**\r\n     * @nodeRenderer\r\n     * 如果midRender开启 则需要指定 nodeRenderer函数\r\n     * */\r\n    nodeRenderer: {\r\n      type: Function || null,\r\n      default: null,\r\n    },\r\n    /***\r\n     * edit 是否开启编辑\r\n     **/\r\n    edit: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    panelControlls: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  beforeCreate() {\r\n    REF = this;\r\n  },\r\n  methods: {\r\n    createAbstractNodes(dataList) {\r\n      return dataList.map((infoNode) => {\r\n        const _infoNode = JSON.parse(JSON.stringify(infoNode));\r\n        if (_infoNode.children) {\r\n          _infoNode.children = _infoNode.children.map((childList) =>\r\n            this.createAbstractNodes(childList)\r\n          );\r\n        }\r\n        // 手动渲染与自动渲染\r\n        let { nodeType, bodyContent, headerContent } = this.midRender\r\n          ? (() => {\r\n              if (!this.nodeRenderer) {\r\n                throw new Error(\r\n                  \"[sun-workflow error]: 手动渲染已被打开 midRender: ture 请传入 nodeRender函数\"\r\n                );\r\n              }\r\n              const handleNodeInfo = this.nodeRenderer(_infoNode);\r\n              if (!handleNodeInfo) {\r\n                throw new Error(\r\n                  \"[sun-workflow error]:nodeRenderer 必须返回 对象并包含节点类型 nodeType， 如: {nodeType: 1}\"\r\n                );\r\n              }\r\n              if (!handleNodeInfo.nodeType) {\r\n                throw new Error(\"[sun-workflow error]:节点类型错误\");\r\n              }\r\n              return handleNodeInfo;\r\n            })()\r\n          : infoNode;\r\n        const nodeInstance = eval(`new ${NodeCreaterMap[nodeType]}()`);\r\n        _infoNode.node = nodeInstance;\r\n        if (bodyContent) nodeInstance.setBody(bodyContent);\r\n        if (headerContent) nodeInstance.setHeader(headerContent);\r\n        nodeInstance.setNodeOriginInfo(_infoNode);\r\n        return _infoNode;\r\n      });\r\n    },\r\n    concatAbstractNodes() {\r\n      // 审批流抽象结构\r\n      if (!Array.isArray(this.flowData))\r\n        return console.warn(\"[sun-workflow error]: flowData 必須是 Array類型\");\r\n      this.privateFlowData = [\r\n        // getStartNodeInfo(),\r\n        ...this.createAbstractNodes(this.flowData),\r\n        getEndNodeInfo(),\r\n      ];\r\n    },\r\n    getFlowData(data) {\r\n      return (data || this.privateFlowData).map((item) => {\r\n        let children = null;\r\n        if (item.children) {\r\n          children = item.children.map((items) => this.getFlowData(items));\r\n        }\r\n        return {\r\n          nodeInfo: {\r\n            headerContent: item.node.headerContent,\r\n            bodyContent: item.node.bodyContent,\r\n            nodeType: item.node.nodeType,\r\n            title: item.node.title,\r\n          },\r\n          orginInfo: {\r\n            ...Object.keys(item.node.orginInfo || {})\r\n              .filter((key) => key !== \"node\")\r\n              .reduce((ref, cur) => {\r\n                if (typeof ref[cur] !== \"function\") {\r\n                  ref[cur] = item.node[cur];\r\n                }\r\n\r\n                return ref;\r\n              }, {}),\r\n          },\r\n          ...(children ? { children } : {}),\r\n        };\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    const target = document.getElementById(\"SUN_WORKFLOW_TARGET\");\r\n    target.onclick = (e) => {\r\n      if (e.target.className.indexOf(\"workflow__addbtn\") == -1)\r\n        renderedPanelInstances.forEach((node) => (node.showPanel = false));\r\n    };\r\n    this.concatAbstractNodes();\r\n  },\r\n  watch: {\r\n    flowData() {\r\n      this.concatAbstractNodes();\r\n    },\r\n  },\r\n};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunksun_flow\"] = self[\"webpackChunksun_flow\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(2021); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createBlock","_component_index_page","State","reactive","flowData","bodyContent","nodeType","children","headerContent","h","style","__exports__","getError","err","alert","JSON","stringify","counter","nodeRednder","node","controllMiddleWareConfig","add","next","console","log","remove","workflowIns","input","drawer","flag","currentNode","pos","flowControlls","text","disabled","syncModal","_callback","_node","modal","modalTitle","modelParams","header","body","modelSure","modelShow","callback","nodeName","async","ElMessageBox","confirmButtonText","cancelButtonText","bodyClick","headerClick","submit","setHeader","setBody","getWorkflowIns","ins","getWorkflowData","getFlowData","tabState","tabIndex","name","components","indexPage","render","createApp","App","use","Element","mount","RoutineNodeSize","width","headerHeight","ProcessNode","constructor","nodeRender","this","height","fontSize","bgColor","type","reference","parentNode","parentNodeIndex","setReference","setParentNode","AddConditionNode","removeNodeMethod","title","currentProcess","removeNode","setCurrentProcess","process","OriginalNode","headerBg","titleColor","InitiatorNode","super","ApproverNode","CcNode","AgentNode","ConditionNode","renderedPanelInstances","AbstractControllBtn","handleClass","icon","scope","class","onclick","middleware","middlewareDispatchCenter","then","splice","renderMethods","getConditionGroup","AbstractNode","eval","NodeCreaterMap","error","src","controllPanelInstance","defaultControllIcon","icon_ApproverNode","icon_CcNode","ico_AgentNode","icon_ConditionNode","defaultControlls","Panel","controlls","REF","panelControlls","length","map","controll","btnInfo","apply","AddBtn","panel","forEach","showPanel","icon_add","push","edit","props","String","default","data","zIndex","getHeaderContent","bind","icon_close","getBodyContent","orginInfo","UseConditionNode","num","icon_close_white","UseAddConditionNode","controllType","Promise","stop","controllMiddleware","middlewareConfig","e","referencePos","parentNodePos","$emit","errcode","stopPropagation","setNodeOriginInfo","handlerHeaderRender","content","handlerBodyRender","icon_arrow_right","UseStartProcessNode","UseEndProcessNode","UseInitiatorNode","UseApproverNode","UseCcNode","UseAgentNode","WorkFlow","nodes","renderFlow","workFlowGroup","tail","sort","outer","inner","createShortFlow","temp","parentIndex","maxIndex","currentNodes","nodeIns","index","retVnode","child","computedTailBorder","targetStyleTar","document","getElementById","textStyleSheet","innerHTML","createElement","setAttribute","appendChild","Array","prototype","call","getElementsByClassName","wrap","find","childNodes","wc","className","indexOf","first","last","pc","classList","classname","offsetWidth","WorkFlowVnode","Object","FlowIns","mounted","updated","getStartNodeInfo","getEndNodeInfo","id","privateFlowData","scale","scaleSize","parseInt","Boolean","midRender","nodeRenderer","Function","beforeCreate","methods","createAbstractNodes","dataList","infoNode","_infoNode","parse","childList","Error","handleNodeInfo","nodeInstance","concatAbstractNodes","isArray","warn","item","items","nodeInfo","keys","filter","key","reduce","ref","cur","target","watch","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","loaded","__webpack_modules__","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","window","obj","prop","hasOwnProperty","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}